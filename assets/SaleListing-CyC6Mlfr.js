import{f as ze,a as Ee,b as Ye,j as e,B as Se,c as Le,E as Me,l as yt,w as bt,v as et,D as Xe,r as z,s as $e,G as Ie,o as U,F as he,T as oe,M as gt,_ as xe,N as vt,q as xt,O as jt,H as wt,K as tt,m as Pt,u as Tt}from"./index-HH_UOIZx.js";import{R as _t,C as Oe,I as Ct}from"./CommonTitle-CeQYZZhX.js";import{R as ce,A as St}from"./AddButton-EMGjYyJp.js";import{u as At}from"./useGetSuperCategories-By2xVup2.js";import{M as Qe,D as kt,a as Et}from"./DateIcon-COKakmTY.js";import{S as me}from"./Stack-CJLiOtGk.js";import{a as Dt,N as J}from"./NumberInput-C3nc0w_S.js";import{C as Fe}from"./Center-DnD7M4rk.js";import{B as be}from"./Button-BxVRjdO9.js";import{A as nt}from"./ActionIcon-D0cIWTmT.js";import{c as Rt}from"./createReactComponent-BvNoKUJd.js";import{u as Bt}from"./useQuery-CfinWix-.js";import{a as rt}from"./axiosInstance-f51KjAOb.js";import{a as Mt,S as pe}from"./Select-DmDJsrLN.js";import{I as Ot}from"./IconTrash-dlyoLBAc.js";import{z as q,u as Nt,a as It}from"./index-DOWDAM7u.js";import{u as Ft}from"./useGetAccountList-CvKiyq5C.js";import{u as qt}from"./useMutation-Dn-P9RO6.js";import{T as We}from"./TextInput-CnAMk_nK.js";import"./InputBase-BzmGfW4v.js";var ot={root:"m_3eebeb36",label:"m_9e365f20"};const zt={orientation:"horizontal"},Ht=Le((s,{color:d,variant:i,size:S})=>({root:{"--divider-color":d?Me(d,s):void 0,"--divider-border-style":i,"--divider-size":yt(S,"divider-size")}})),qe=ze((s,d)=>{const i=Ee("Divider",zt,s),{classNames:S,className:D,style:I,styles:x,unstyled:R,vars:l,color:c,orientation:y,label:g,labelPosition:j,mod:f,..._}=i,B=Ye({name:"Divider",classes:ot,props:i,className:D,style:I,classNames:S,styles:x,unstyled:R,vars:l,varsResolver:Ht});return e.jsx(Se,{ref:d,mod:[{orientation:y,"with-label":!!g},f],...B("root"),..._,role:"separator",children:g&&e.jsx(Se,{component:"span",mod:{position:j},...B("label"),children:g})})});qe.classes=ot;qe.displayName="@mantine/core/Divider";const Vt={};function Ke(s){const d=Ee("NumberFormatter",Vt,s),{value:i,defaultValue:S,...D}=d;return i===void 0?null:e.jsx(Dt,{displayType:"text",value:i,...D})}const Wt=s=>s;Ke.extend=Wt;Ke.displayName="@mantine/core/NumberFormatter";const[Gt,Yt]=bt("Table component was not found in the tree");var De={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Lt(s,d){if(!d)return;const i={};return d.columnBorder&&s.withColumnBorders&&(i["data-with-column-border"]=!0),d.rowBorder&&s.withRowBorders&&(i["data-with-row-border"]=!0),d.striped&&s.striped&&(i["data-striped"]=s.striped),d.highlightOnHover&&s.highlightOnHover&&(i["data-hover"]=!0),d.captionSide&&s.captionSide&&(i["data-side"]=s.captionSide),d.stickyHeader&&s.stickyHeader&&(i["data-sticky"]=!0),i}function je(s,d){const i=`Table${s.charAt(0).toUpperCase()}${s.slice(1)}`,S=ze((D,I)=>{const x=Ee(i,{},D),{classNames:R,className:l,style:c,styles:y,...g}=x,j=Yt();return e.jsx(Se,{component:s,ref:I,...Lt(j,d),...j.getStyles(s,{className:l,classNames:R,style:c,styles:y,props:x}),...g})});return S.displayName=`@mantine/core/${i}`,S.classes=De,S}const Ge=je("th",{columnBorder:!0}),at=je("td",{columnBorder:!0}),Ne=je("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),st=je("thead",{stickyHeader:!0}),it=je("tbody"),lt=je("tfoot"),ct=je("caption",{captionSide:!0});function Ue({data:s}){return e.jsxs(e.Fragment,{children:[s.caption&&e.jsx(ct,{children:s.caption}),s.head&&e.jsx(st,{children:e.jsx(Ne,{children:s.head.map((d,i)=>e.jsx(Ge,{children:d},i))})}),s.body&&e.jsx(it,{children:s.body.map((d,i)=>e.jsx(Ne,{children:d.map((S,D)=>e.jsx(at,{children:S},D))},i))}),s.foot&&e.jsx(lt,{children:e.jsx(Ne,{children:s.foot.map((d,i)=>e.jsx(Ge,{children:d},i))})})]})}Ue.displayName="@mantine/core/TableDataRenderer";const $t={type:"scrollarea"},Qt=Le((s,{minWidth:d,type:i})=>({scrollContainer:{"--table-min-width":et(d),"--table-overflow":i==="native"?"auto":void 0}})),Ze=ze((s,d)=>{const i=Ee("TableScrollContainer",$t,s),{classNames:S,className:D,style:I,styles:x,unstyled:R,vars:l,children:c,minWidth:y,type:g,...j}=i,f=Ye({name:"TableScrollContainer",classes:De,props:i,className:D,style:I,classNames:S,styles:x,unstyled:R,vars:l,varsResolver:Qt,rootSelector:"scrollContainer"});return e.jsx(Se,{component:g==="scrollarea"?Mt:"div",...g==="scrollarea"?{offsetScrollbars:"x"}:{},ref:d,...f("scrollContainer"),...j,children:e.jsx("div",{...f("scrollContainerInner"),children:c})})});Ze.classes=De;Ze.displayName="@mantine/core/TableScrollContainer";const Kt={withRowBorders:!0,verticalSpacing:7},Ut=Le((s,{layout:d,captionSide:i,horizontalSpacing:S,verticalSpacing:D,borderColor:I,stripedColor:x,highlightOnHoverColor:R,striped:l,highlightOnHover:c,stickyHeaderOffset:y,stickyHeader:g})=>({table:{"--table-layout":d,"--table-caption-side":i,"--table-horizontal-spacing":Xe(S),"--table-vertical-spacing":Xe(D),"--table-border-color":I?Me(I,s):void 0,"--table-striped-color":l&&x?Me(x,s):void 0,"--table-highlight-on-hover-color":c&&R?Me(R,s):void 0,"--table-sticky-header-offset":g?et(y):void 0}})),h=ze((s,d)=>{const i=Ee("Table",Kt,s),{classNames:S,className:D,style:I,styles:x,unstyled:R,vars:l,horizontalSpacing:c,verticalSpacing:y,captionSide:g,stripedColor:j,highlightOnHoverColor:f,striped:_,highlightOnHover:B,withColumnBorders:C,withRowBorders:P,withTableBorder:T,borderColor:u,layout:w,variant:A,data:N,children:G,stickyHeader:k,stickyHeaderOffset:V,mod:p,...Y}=i,Z=Ye({name:"Table",props:i,className:D,style:I,classes:De,classNames:S,styles:x,unstyled:R,rootSelector:"table",vars:l,varsResolver:Ut});return e.jsx(Gt,{value:{getStyles:Z,stickyHeader:k,striped:_===!0?"odd":_||void 0,highlightOnHover:B,withColumnBorders:C,withRowBorders:P,captionSide:g||"bottom"},children:e.jsx(Se,{component:"table",variant:A,ref:d,mod:[{"data-with-table-border":T},p],...Z("table"),...Y,children:G||!!N&&e.jsx(Ue,{data:N})})})});h.classes=De;h.displayName="@mantine/core/Table";h.Td=at;h.Th=Ge;h.Tr=Ne;h.Thead=st;h.Tbody=it;h.Tfoot=lt;h.Caption=ct;h.ScrollContainer=Ze;h.DataRenderer=Ue;/**
 * @license @tabler/icons-react v3.9.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut=Rt("outline","tag","IconTag",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}]]);const Zt=({item:s,setSaleItems:d})=>{const[i,S]=z.useState("amount"),[D,{open:I,close:x}]=$e(!1),[R,l]=z.useState(0),[c,y]=z.useState(0),[g,j]=z.useState(s.totalPrice),f=()=>{d(C=>C.map(P=>P._id===s._id?{...P,totalPrice:g,hasDiscount:!0}:P)),l(0),y(0),x()},_=C=>{const P=Number(C);P<0||P>100||y(P)},B=C=>{const P=Number(C);P<0||l(P)};return z.useEffect(()=>{if(i==="amount"){const C=s.totalPrice-R;j(C)}if(i==="percent"){const C=s.totalPrice-s.totalPrice*(c/100);j(C)}i==="foc"&&j(0)},[i,s.totalPrice,R,c]),e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:400,styles:{title:{fontSize:"20px",fontWeight:600}},opened:D,onClose:x,title:" Item Discount ",children:e.jsxs(me,{children:[e.jsx(J,{label:"Total Price",hideControls:!0,disabled:!0,value:s.totalPrice}),e.jsx(Fe,{children:e.jsx(ce.Group,{value:i,onChange:C=>S(C),children:e.jsxs(Ie,{mt:"xs",justify:"center",children:[e.jsx(ce,{color:U,value:"amount",label:"Amount"}),e.jsx(ce,{color:U,value:"percent",label:"Percent"}),e.jsx(ce,{color:U,value:"foc",label:"Foc"})]})})}),i==="amount"&&e.jsx(J,{label:"Discount Amount",value:R,onChange:B}),i==="percent"&&e.jsx(J,{label:"Discount Percentage",value:c,onChange:_}),e.jsx(J,{label:"Net Total Price",hideControls:!0,disabled:!0,value:g}),e.jsxs(he,{justify:"end",gap:15,mt:20,children:[e.jsx(be,{variant:"outline",radius:4,size:"sm",onClick:x,color:U,children:"Cancel"}),e.jsx(be,{radius:4,size:"sm",onClick:f,color:U,children:"Confirm"})]})]})}),e.jsx(nt,{onClick:I,color:U,variant:"filled",children:e.jsx(ut,{size:17})})]})},Jt=async(s="")=>await(await rt.get(`/v1/sale-stock-and-package?s=${s}`)).data.data,Xt=(s="")=>Bt({queryKey:["subCategories",s],queryFn:()=>Jt(s),select:d=>d}),en=({saleItems:s,setSaleItems:d,totalAmount:i})=>{const[S,D]=z.useState(null),[I,x]=z.useState(null),{data:R}=At(),{data:l}=Xt(S||""),c=()=>{if(l&&I){const _={...gt(l)[I],qty:1};s.find(C=>C._id===_._id)?xe.error("Item already exists"):(d(C=>[...C,_].map((P,T)=>({...P,no:T+1,totalPrice:P.qty*P.sellingPrice,hasDiscount:!1}))),D(null),x(null))}},y=(f,_,B)=>{_>B||_<1||d(C=>C.map(P=>{const T=P.sellingPrice*_;return P._id===f?{...P,qty:_,totalPrice:T}:P}))},g=f=>{d(_=>_.filter(B=>B._id!==f))},j=()=>{D(null),x(null)};return e.jsxs(me,{h:"100%",w:"100%",style:{border:"1px solid #d9d9d9",borderRadius:"7px"},p:"sm",children:[e.jsxs(he,{align:"center",justify:"end",gap:10,children:[e.jsx(_t,{onClick:j}),e.jsx(pe,{placeholder:"super category",value:S,onChange:f=>{x(null),D(f)},allowDeselect:!1,data:R==null?void 0:R.map(f=>({label:f.name,value:f._id}))}),e.jsx(pe,{value:I,onChange:f=>x(f),placeholder:"sub category",disabled:!S,allowDeselect:!1,data:l==null?void 0:l.map(f=>({label:f.name,value:f._id}))}),e.jsx(St,{onClick:c,children:"Add"})]}),e.jsxs(h,{withTableBorder:!0,withColumnBorders:!0,verticalSpacing:"sm",children:[e.jsx(h.Thead,{children:e.jsxs(h.Tr,{children:[e.jsx(h.Th,{children:"#"}),e.jsx(h.Th,{children:"Item name"}),e.jsx(h.Th,{w:120,children:"Qty"}),e.jsx(h.Th,{children:"Price"}),e.jsx(h.Th,{w:120,children:"Discount"}),e.jsx(h.Th,{w:120,children:"Total"}),e.jsx(h.Th,{children:"Action"})]})}),e.jsxs(h.Tbody,{children:[s==null?void 0:s.map((f,_)=>e.jsxs(h.Tr,{children:[e.jsx(h.Td,{children:f.no}),e.jsx(h.Td,{children:f.name}),e.jsx(h.Td,{children:e.jsx(J,{disabled:f.hasDiscount,w:80,value:f.qty,onChange:B=>y(f._id,Number(B),f.currentQuantity)})}),e.jsx(h.Td,{children:f.sellingPrice}),e.jsx(h.Td,{children:f.hasDiscount?f.qty*f.sellingPrice-f.totalPrice:e.jsx(Zt,{item:f,setSaleItems:d})}),e.jsx(h.Td,{children:f.totalPrice}),e.jsx(h.Td,{children:e.jsx(Ot,{color:"red",onClick:()=>g(f._id),style:{cursor:"pointer"}})})]},_)),e.jsxs(h.Tr,{children:[e.jsx(h.Td,{colSpan:5,style:{textAlign:"end"},children:e.jsx(Fe,{children:e.jsx(oe,{children:"Total Quantity"})})}),e.jsx(h.Td,{children:e.jsx(oe,{fw:600,children:s.reduce((f,_)=>f+_.qty,0)})})]}),e.jsxs(h.Tr,{children:[e.jsx(h.Td,{colSpan:5,style:{textAlign:"end"},children:e.jsx(Fe,{children:e.jsx(oe,{children:"Total Price"})})}),e.jsx(h.Td,{children:e.jsx(oe,{fw:600,children:e.jsx(Ke,{thousandSeparator:!0,value:i})})})]})]})]})]})},tn=q.object({item_id:q.string(),price:q.number(),quantity:q.number(),discount:q.number()}),nn=q.object({item_id:q.string(),price:q.number(),quantity:q.number(),discount:q.number()}),rn=q.object({balance:q.number(),change:q.number(),isDouble:q.boolean().optional(),secondAmount:q.number(),createdAt:q.date(),relatedItem:q.array(tn),relatedPackage:q.array(nn),relatedCash:q.string().optional(),relatedBank:q.string().optional(),secondAccount:q.string().optional(),paymentType:q.enum(["Cash","Bank"]),remark:q.string().optional(),createdBy:q.string(),totalAmount:q.number(),totalPaidAmount:q.number(),tsType:q.enum(["Standalone","Combine","Other"]).default("Combine")}),Je=vt()(s=>({discount:0,setDiscount:d=>s({discount:d}),total:0,setTotal:d=>s({total:d})})),on=({discountMethod:s,setDiscountMethod:d,totalAmount:i,setSubTotal:S,setIsConfirm:D})=>{const[I,{open:x,close:R}]=$e(!1),[l,c]=z.useState(0),[y,g]=z.useState(0),[j,f]=z.useState(i),{setDiscount:_}=Je(),B=()=>{D(!0);const T=i-j;_(T),S(j),R(),c(0),g(0),f(i)},C=T=>{const u=Number(T);u<0||u>100||g(u)},P=T=>{const u=Number(T);u<0||c(u)};return z.useEffect(()=>{if(s==="Amount"){const T=i-l;f(T)}if(s==="Percent"){const T=i-i*(y/100);f(T)}s==="FOC"&&f(0)},[s,i,l,y]),e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:400,styles:{title:{fontSize:"20px",fontWeight:600}},opened:I,onClose:R,title:" Item Discount ",children:e.jsxs(me,{children:[e.jsx(J,{label:"Total Price",hideControls:!0,disabled:!0,value:i}),e.jsx(Fe,{children:e.jsx(ce.Group,{value:s,onChange:T=>d(T),children:e.jsxs(Ie,{mt:"xs",justify:"center",children:[e.jsx(ce,{color:U,value:"Amount",label:"Amount"}),e.jsx(ce,{color:U,value:"Percent",label:"Percent"}),e.jsx(ce,{color:U,value:"FOC",label:"Foc"})]})})}),s==="Amount"&&e.jsx(J,{label:"Discount Amount",value:l,onChange:P}),s==="Percent"&&e.jsx(J,{label:"Discount Percentage",value:y,onChange:C}),e.jsx(J,{label:"Net Total Price",hideControls:!0,disabled:!0,value:j}),e.jsxs(he,{justify:"end",gap:15,mt:20,children:[e.jsx(be,{variant:"outline",radius:4,size:"sm",onClick:R,color:U,children:"Cancel"}),e.jsx(be,{radius:4,size:"sm",onClick:B,color:U,children:"Confirm"})]})]})}),e.jsx(nt,{w:"10%",onClick:x,size:36,color:U,variant:"filled",children:e.jsx(ut,{size:17})})]})},an=async s=>{await rt.post("/v1/item-voucher",s)},sn=()=>{const s=xt();return qt({mutationFn:an,onSuccess:()=>{s.invalidateQueries(["vouchers"])}})};var dt={exports:{}};(function(s,d){(function(i,S){s.exports=S(z,jt)})(typeof self<"u"?self:wt,function(i,S){return function(){var D={328:function(l,c,y){Object.defineProperty(c,"__esModule",{value:!0}),c.PrintContextConsumer=c.PrintContext=void 0;var g=y(496),j=Object.prototype.hasOwnProperty.call(g,"createContext");c.PrintContext=j?g.createContext({}):null,c.PrintContextConsumer=c.PrintContext?c.PrintContext.Consumer:function(){return null}},428:function(l,c,y){Object.defineProperty(c,"__esModule",{value:!0}),c.ReactToPrint=void 0;var g=y(316),j=y(496),f=y(190),_=y(328),B=y(940),C=function(P){function T(){var u=P.apply(this,g.__spreadArray([],g.__read(arguments),!1))||this;return u.startPrint=function(w){var A=u.props,N=A.onAfterPrint,G=A.onPrintError,k=A.print,V=A.documentTitle;setTimeout(function(){var p,Y;if(w.contentWindow)if(w.contentWindow.focus(),k)k(w).then(function(){return N==null?void 0:N()}).then(function(){return u.handleRemoveIframe()}).catch(function(te){G?G("print",te):u.logMessages(["An error was thrown by the specified `print` function"])});else{if(w.contentWindow.print){var Z=(Y=(p=w.contentDocument)===null||p===void 0?void 0:p.title)!==null&&Y!==void 0?Y:"",H=w.ownerDocument.title;V&&(w.ownerDocument.title=V,w.contentDocument&&(w.contentDocument.title=V)),w.contentWindow.print(),V&&(w.ownerDocument.title=H,w.contentDocument&&(w.contentDocument.title=Z))}else u.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);N==null||N(),u.handleRemoveIframe()}else u.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},u.triggerPrint=function(w){var A=u.props,N=A.onBeforePrint,G=A.onPrintError;if(N){var k=N();k&&typeof k.then=="function"?k.then(function(){u.startPrint(w)}).catch(function(V){G&&G("onBeforePrint",V)}):u.startPrint(w)}else u.startPrint(w)},u.handlePrint=function(w){var A=u.props,N=A.bodyClass,G=A.content,k=A.copyStyles,V=A.fonts,p=A.pageStyle,Y=A.nonce,Z=typeof w=="function"?w():null;if(Z&&typeof G=="function"&&u.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),Z||typeof G!="function"||(Z=G()),Z!==void 0)if(Z!==null){var H=document.createElement("iframe");H.width="".concat(document.documentElement.clientWidth,"px"),H.height="".concat(document.documentElement.clientHeight,"px"),H.style.position="absolute",H.style.top="-".concat(document.documentElement.clientHeight+100,"px"),H.style.left="-".concat(document.documentElement.clientWidth+100,"px"),H.id="printWindow",H.srcdoc="<!DOCTYPE html>";var te=(0,f.findDOMNode)(Z);if(te){var X=te.cloneNode(!0),F=X instanceof Text,Re=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),we=F?[]:X.querySelectorAll("img"),Pe=F?[]:X.querySelectorAll("video"),He=V?V.length:0;u.numResourcesToLoad=Re.length+we.length+Pe.length+He,u.resourcesLoaded=[],u.resourcesErrored=[];var L=function(ue,fe){u.resourcesLoaded.includes(ue)?u.logMessages(["Tried to mark a resource that has already been handled",ue],"debug"):(fe?(u.logMessages(g.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],g.__read(fe),!1)),u.resourcesErrored.push(ue)):u.resourcesLoaded.push(ue),u.resourcesLoaded.length+u.resourcesErrored.length===u.numResourcesToLoad&&u.triggerPrint(H))};H.onload=function(){var ue,fe,Te,_e;H.onload=null;var $=H.contentDocument||((fe=H.contentWindow)===null||fe===void 0?void 0:fe.document);if($){$.body.appendChild(X),V&&(!((Te=H.contentDocument)===null||Te===void 0)&&Te.fonts&&(!((_e=H.contentWindow)===null||_e===void 0)&&_e.FontFace)?V.forEach(function(re){var O=new FontFace(re.family,re.source,{weight:re.weight,style:re.style});H.contentDocument.fonts.add(O),O.loaded.then(function(){L(O)}).catch(function(W){L(O,["Failed loading the font:",O,"Load error:",W])})}):(V.forEach(function(re){return L(re)}),u.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var Ae=typeof p=="function"?p():p;if(typeof Ae!="string")u.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof Ae,'". Styles from `pageStyle` will not be applied.')]);else{var Ce=$.createElement("style");Y&&(Ce.setAttribute("nonce",Y),$.head.setAttribute("nonce",Y)),Ce.appendChild($.createTextNode(Ae)),$.head.appendChild(Ce)}if(N&&(ue=$.body.classList).add.apply(ue,g.__spreadArray([],g.__read(N.split(" ")),!1)),!F){for(var t=F?[]:te.querySelectorAll("canvas"),n=$.querySelectorAll("canvas"),r=0;r<t.length;++r){var o=t[r],a=n[r].getContext("2d");a&&a.drawImage(o,0,0)}var v=function(re){var O=we[re],W=O.getAttribute("src");if(W){var se=new Image;se.onload=function(){return L(O)},se.onerror=function(ve,ke,Be,le,ee){return L(O,["Error loading <img>",O,"Error",ee])},se.src=W}else L(O,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',O])};for(r=0;r<we.length;r++)v(r);var m=function(re){var O=Pe[re];O.preload="auto";var W=O.getAttribute("poster");if(W){var se=new Image;se.onload=function(){return L(O)},se.onerror=function(ve,ke,Be,le,ee){return L(O,["Error loading video poster",W,"for video",O,"Error:",ee])},se.src=W}else O.readyState>=2?L(O):(O.onloadeddata=function(){return L(O)},O.onerror=function(ve,ke,Be,le,ee){return L(O,["Error loading video",O,"Error",ee])},O.onstalled=function(){return L(O,["Loading video stalled, skipping",O])})};for(r=0;r<Pe.length;r++)m(r);var E="input",Q=te.querySelectorAll(E),K=$.querySelectorAll(E);for(r=0;r<Q.length;r++)K[r].value=Q[r].value;var b="input[type=checkbox],input[type=radio]",M=te.querySelectorAll(b),ne=$.querySelectorAll(b);for(r=0;r<M.length;r++)ne[r].checked=M[r].checked;var ae="select",ie=te.querySelectorAll(ae),ye=$.querySelectorAll(ae);for(r=0;r<ie.length;r++)ye[r].value=ie[r].value}if(k)for(var de=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),ge=function(re,O){var W=de[re];if(W.tagName.toLowerCase()==="style"){var se=$.createElement(W.tagName),ve=W.sheet;if(ve){var ke="";try{for(var Be=ve.cssRules.length,le=0;le<Be;++le)typeof ve.cssRules[le].cssText=="string"&&(ke+="".concat(ve.cssRules[le].cssText,`\r
`))}catch{u.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",W],"warning")}se.setAttribute("id","react-to-print-".concat(re)),Y&&se.setAttribute("nonce",Y),se.appendChild($.createTextNode(ke)),$.head.appendChild(se)}}else if(W.getAttribute("href"))if(W.hasAttribute("disabled"))u.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",W],"warning"),L(W);else{for(var ee=$.createElement(W.tagName),pt=(le=0,W.attributes.length);le<pt;++le){var Ve=W.attributes[le];Ve&&ee.setAttribute(Ve.nodeName,Ve.nodeValue||"")}ee.onload=function(){return L(ee)},ee.onerror=function(ht,fn,pn,hn,mt){return L(ee,["Failed to load",ee,"Error:",mt])},Y&&ee.setAttribute("nonce",Y),$.head.appendChild(ee)}else u.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",W],"warning"),L(W)},ft=(r=0,de.length);r<ft;++r)ge(r)}u.numResourcesToLoad!==0&&k||u.triggerPrint(H)},u.handleRemoveIframe(!0),document.body.appendChild(H)}else u.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else u.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else u.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},u.handleRemoveIframe=function(w){var A=u.props.removeAfterPrint;if(w||A){var N=document.getElementById("printWindow");N&&document.body.removeChild(N)}},u.logMessages=function(w,A){A===void 0&&(A="error"),u.props.suppressErrors||(A==="error"?console.error(w):A==="warning"?console.warn(w):A==="debug"&&console.debug(w))},u}return g.__extends(T,P),T.prototype.handleClick=function(u,w){var A=this,N=this.props,G=N.onBeforeGetContent,k=N.onPrintError;if(G){var V=G();V&&typeof V.then=="function"?V.then(function(){return A.handlePrint(w)}).catch(function(p){k&&k("onBeforeGetContent",p)}):this.handlePrint(w)}else this.handlePrint(w)},T.prototype.render=function(){var u=this.props,w=u.children,A=u.trigger;if(A)return j.cloneElement(A(),{onClick:this.handleClick.bind(this)});if(!_.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var N={handlePrint:this.handleClick.bind(this)};return j.createElement(_.PrintContext.Provider,{value:N},w)},T.defaultProps=B.defaultProps,T}(j.Component);c.ReactToPrint=C},940:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.defaultProps=void 0,c.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(l,c,y){Object.defineProperty(c,"__esModule",{value:!0}),c.useReactToPrint=void 0;var g=y(316),j=y(496),f=y(428),_=y(940),B=y(860),C=Object.prototype.hasOwnProperty.call(j,"useMemo")&&Object.prototype.hasOwnProperty.call(j,"useCallback");c.useReactToPrint=function(P){if(!C)return P.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var T=j.useMemo(function(){return new f.ReactToPrint(g.__assign(g.__assign({},_.defaultProps),P))},[P]);return j.useCallback(function(u,w){return(0,B.wrapCallbackWithArgs)(T,T.handleClick,w)(u)},[T])}},860:function(l,c,y){Object.defineProperty(c,"__esModule",{value:!0}),c.wrapCallbackWithArgs=void 0;var g=y(316);c.wrapCallbackWithArgs=function(j,f){for(var _=[],B=2;B<arguments.length;B++)_[B-2]=arguments[B];return function(){for(var C=[],P=0;P<arguments.length;P++)C[P]=arguments[P];return f.apply(j,g.__spreadArray(g.__spreadArray([],g.__read(C),!1),g.__read(_),!1))}}},496:function(l){l.exports=i},190:function(l){l.exports=S},316:function(l,c,y){y.r(c),y.d(c,{__addDisposableResource:function(){return $},__assign:function(){return f},__asyncDelegator:function(){return Re},__asyncGenerator:function(){return F},__asyncValues:function(){return we},__await:function(){return X},__awaiter:function(){return N},__classPrivateFieldGet:function(){return fe},__classPrivateFieldIn:function(){return _e},__classPrivateFieldSet:function(){return Te},__createBinding:function(){return k},__decorate:function(){return B},__disposeResources:function(){return Ce},__esDecorate:function(){return P},__exportStar:function(){return V},__extends:function(){return j},__generator:function(){return G},__importDefault:function(){return ue},__importStar:function(){return L},__makeTemplateObject:function(){return Pe},__metadata:function(){return A},__param:function(){return C},__propKey:function(){return u},__read:function(){return Y},__rest:function(){return _},__runInitializers:function(){return T},__setFunctionName:function(){return w},__spread:function(){return Z},__spreadArray:function(){return te},__spreadArrays:function(){return H},__values:function(){return p}});var g=function(t,n){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])},g(t,n)};function j(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}g(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var f=function(){return f=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t},f.apply(this,arguments)};function _(t,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(o=Object.getOwnPropertySymbols(t);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(r[o[a]]=t[o[a]])}return r}function B(t,n,r,o){var a,v=arguments.length,m=v<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(t,n,r,o);else for(var E=t.length-1;E>=0;E--)(a=t[E])&&(m=(v<3?a(m):v>3?a(n,r,m):a(n,r))||m);return v>3&&m&&Object.defineProperty(n,r,m),m}function C(t,n){return function(r,o){n(r,o,t)}}function P(t,n,r,o,a,v){function m(ge){if(ge!==void 0&&typeof ge!="function")throw new TypeError("Function expected");return ge}for(var E,Q=o.kind,K=Q==="getter"?"get":Q==="setter"?"set":"value",b=!n&&t?o.static?t:t.prototype:null,M=n||(b?Object.getOwnPropertyDescriptor(b,o.name):{}),ne=!1,ae=r.length-1;ae>=0;ae--){var ie={};for(var ye in o)ie[ye]=ye==="access"?{}:o[ye];for(var ye in o.access)ie.access[ye]=o.access[ye];ie.addInitializer=function(ge){if(ne)throw new TypeError("Cannot add initializers after decoration has completed");v.push(m(ge||null))};var de=(0,r[ae])(Q==="accessor"?{get:M.get,set:M.set}:M[K],ie);if(Q==="accessor"){if(de===void 0)continue;if(de===null||typeof de!="object")throw new TypeError("Object expected");(E=m(de.get))&&(M.get=E),(E=m(de.set))&&(M.set=E),(E=m(de.init))&&a.unshift(E)}else(E=m(de))&&(Q==="field"?a.unshift(E):M[K]=E)}b&&Object.defineProperty(b,o.name,M),ne=!0}function T(t,n,r){for(var o=arguments.length>2,a=0;a<n.length;a++)r=o?n[a].call(t,r):n[a].call(t);return o?r:void 0}function u(t){return typeof t=="symbol"?t:"".concat(t)}function w(t,n,r){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",n):n})}function A(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)}function N(t,n,r,o){return new(r||(r=Promise))(function(a,v){function m(K){try{Q(o.next(K))}catch(b){v(b)}}function E(K){try{Q(o.throw(K))}catch(b){v(b)}}function Q(K){var b;K.done?a(K.value):(b=K.value,b instanceof r?b:new r(function(M){M(b)})).then(m,E)}Q((o=o.apply(t,n||[])).next())})}function G(t,n){var r,o,a,v,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return v={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function E(Q){return function(K){return function(b){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,b[0]&&(m=0)),m;)try{if(r=1,o&&(a=2&b[0]?o.return:b[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,b[1])).done)return a;switch(o=0,a&&(b=[2&b[0],a.value]),b[0]){case 0:case 1:a=b;break;case 4:return m.label++,{value:b[1],done:!1};case 5:m.label++,o=b[1],b=[0];continue;case 7:b=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||b[0]!==6&&b[0]!==2)){m=0;continue}if(b[0]===3&&(!a||b[1]>a[0]&&b[1]<a[3])){m.label=b[1];break}if(b[0]===6&&m.label<a[1]){m.label=a[1],a=b;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(b);break}a[2]&&m.ops.pop(),m.trys.pop();continue}b=n.call(t,m)}catch(M){b=[6,M],o=0}finally{r=a=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([Q,K])}}}var k=Object.create?function(t,n,r,o){o===void 0&&(o=r);var a=Object.getOwnPropertyDescriptor(n,r);a&&!("get"in a?!n.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(t,o,a)}:function(t,n,r,o){o===void 0&&(o=r),t[o]=n[r]};function V(t,n){for(var r in t)r==="default"||Object.prototype.hasOwnProperty.call(n,r)||k(n,t,r)}function p(t){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&t[n],o=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(t,n){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var o,a,v=r.call(t),m=[];try{for(;(n===void 0||n-- >0)&&!(o=v.next()).done;)m.push(o.value)}catch(E){a={error:E}}finally{try{o&&!o.done&&(r=v.return)&&r.call(v)}finally{if(a)throw a.error}}return m}function Z(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Y(arguments[n]));return t}function H(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var o=Array(t),a=0;for(n=0;n<r;n++)for(var v=arguments[n],m=0,E=v.length;m<E;m++,a++)o[a]=v[m];return o}function te(t,n,r){if(r||arguments.length===2)for(var o,a=0,v=n.length;a<v;a++)!o&&a in n||(o||(o=Array.prototype.slice.call(n,0,a)),o[a]=n[a]);return t.concat(o||Array.prototype.slice.call(n))}function X(t){return this instanceof X?(this.v=t,this):new X(t)}function F(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,a=r.apply(t,n||[]),v=[];return o={},m("next"),m("throw"),m("return"),o[Symbol.asyncIterator]=function(){return this},o;function m(M){a[M]&&(o[M]=function(ne){return new Promise(function(ae,ie){v.push([M,ne,ae,ie])>1||E(M,ne)})})}function E(M,ne){try{(ae=a[M](ne)).value instanceof X?Promise.resolve(ae.value.v).then(Q,K):b(v[0][2],ae)}catch(ie){b(v[0][3],ie)}var ae}function Q(M){E("next",M)}function K(M){E("throw",M)}function b(M,ne){M(ne),v.shift(),v.length&&E(v[0][0],v[0][1])}}function Re(t){var n,r;return n={},o("next"),o("throw",function(a){throw a}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(a,v){n[a]=t[a]?function(m){return(r=!r)?{value:X(t[a](m)),done:!1}:v?v(m):m}:v}}function we(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=t[Symbol.asyncIterator];return r?r.call(t):(t=p(t),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(v){return new Promise(function(m,E){(function(Q,K,b,M){Promise.resolve(M).then(function(ne){Q({value:ne,done:b})},K)})(m,E,(v=t[a](v)).done,v.value)})}}}function Pe(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t}var He=Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n};function L(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&k(n,t,r);return He(n,t),n}function ue(t){return t&&t.__esModule?t:{default:t}}function fe(t,n,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!o:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(t):o?o.value:n.get(t)}function Te(t,n,r,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!a:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(t,r):a?a.value=r:n.set(t,r),r}function _e(t,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?n===t:t.has(n)}function $(t,n,r){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=n[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=n[Symbol.dispose]}if(typeof o!="function")throw new TypeError("Object not disposable.");t.stack.push({value:n,dispose:o,async:r})}else r&&t.stack.push({async:!0});return n}var Ae=typeof SuppressedError=="function"?SuppressedError:function(t,n,r){var o=new Error(r);return o.name="SuppressedError",o.error=t,o.suppressed=n,o};function Ce(t){function n(r){t.error=t.hasError?new Ae(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function r(){for(;t.stack.length;){var o=t.stack.pop();try{var a=o.dispose&&o.dispose.call(o.value);if(o.async)return Promise.resolve(a).then(r,function(v){return n(v),r()})}catch(v){n(v)}}if(t.hasError)throw t.error}()}c.default={__extends:j,__assign:f,__rest:_,__decorate:B,__param:C,__metadata:A,__awaiter:N,__generator:G,__createBinding:k,__exportStar:V,__values:p,__read:Y,__spread:Z,__spreadArrays:H,__spreadArray:te,__await:X,__asyncGenerator:F,__asyncDelegator:Re,__asyncValues:we,__makeTemplateObject:Pe,__importStar:L,__importDefault:ue,__classPrivateFieldGet:fe,__classPrivateFieldSet:Te,__classPrivateFieldIn:_e,__addDisposableResource:$,__disposeResources:Ce}}},I={};function x(l){var c=I[l];if(c!==void 0)return c.exports;var y=I[l]={exports:{}};return D[l](y,y.exports,x),y.exports}x.d=function(l,c){for(var y in c)x.o(c,y)&&!x.o(l,y)&&Object.defineProperty(l,y,{enumerable:!0,get:c[y]})},x.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},x.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var R={};return function(){var l=R;Object.defineProperty(l,"__esModule",{value:!0}),l.useReactToPrint=l.ReactToPrint=l.PrintContextConsumer=void 0;var c=x(328);Object.defineProperty(l,"PrintContextConsumer",{enumerable:!0,get:function(){return c.PrintContextConsumer}});var y=x(428);Object.defineProperty(l,"ReactToPrint",{enumerable:!0,get:function(){return y.ReactToPrint}});var g=x(892);Object.defineProperty(l,"useReactToPrint",{enumerable:!0,get:function(){return g.useReactToPrint}});var j=x(428);l.default=j.ReactToPrint}(),R}()})})(dt);var ln=dt.exports;const cn=({saleItems:s,totalAmount:d})=>{const{discount:i,total:S}=Je(),[D,{open:I,close:x}]=$e(!1),R=z.useRef(null),l=ln.useReactToPrint({content:()=>R.current});return e.jsxs(e.Fragment,{children:[e.jsxs(Qe,{size:750,centered:!0,opened:D,onClose:x,title:"Voucher Preview",styles:{title:{fontSize:"20px",fontWeight:600}},children:[e.jsxs(me,{ref:R,my:10,gap:20,children:[e.jsxs(he,{align:"center",direction:"column",gap:2,children:[e.jsx(oe,{fw:600,fz:22,children:"Vzo"}),e.jsx(oe,{fw:500,fz:16,children:"Hlaing Township, Yangon"}),e.jsx(oe,{fw:500,fz:16,children:"092343243, 0923413432"})]}),e.jsxs(he,{justify:"space-between",children:[e.jsxs(me,{gap:0,children:[e.jsx(oe,{children:"Voucher number : 2384738"}),e.jsxs(oe,{children:["Date : ",tt(new Date).format("YYYY-MM-DD")]})]}),e.jsx(oe,{children:"Min Thu Kha"})]}),e.jsxs(h,{withRowBorders:!1,children:[e.jsx(h.Thead,{children:e.jsxs(h.Tr,{children:[e.jsx(h.Th,{children:"Name"}),e.jsx(h.Th,{children:"Qty*Price(Discount)"}),e.jsx(h.Th,{children:"Total"})]})}),e.jsxs(h.Tbody,{children:[s.map((c,y)=>e.jsxs(h.Tr,{children:[e.jsx(h.Td,{children:c.name}),e.jsx(h.Td,{children:c.qty+"*"+c.sellingPrice}),e.jsx(h.Td,{children:c.totalPrice})]},y)),e.jsxs(h.Tr,{children:[e.jsx(h.Td,{colSpan:2,style:{textAlign:"end"},children:"Total"}),e.jsx(h.Td,{children:e.jsx(oe,{fw:600,children:d})})]}),e.jsxs(h.Tr,{children:[e.jsx(h.Td,{colSpan:2,style:{textAlign:"end"},children:"Discount"}),e.jsx(h.Td,{children:e.jsx(oe,{fw:600,children:i})})]}),e.jsxs(h.Tr,{children:[e.jsx(h.Td,{colSpan:2,style:{textAlign:"end"},children:"Net"}),e.jsx(h.Td,{children:e.jsx(oe,{fw:600,children:S})})]})]})]})]}),e.jsxs(he,{justify:"end",gap:10,align:"center",children:[e.jsx(be,{color:U,onClick:x,variant:"outline",children:"Cancel"}),e.jsx(be,{onClick:l,color:U,children:"print"})]})]}),e.jsx(be,{type:"submit",w:"100%",color:U,onClick:I,children:"Preview"})]})},un=({saleItems:s,totalAmount:d})=>{const{data:i}=Ft(),{setTotal:S}=Je(),[D,I]=z.useState("Amount"),[x,R]=z.useState("full"),[l,c]=z.useState("Cash"),[y,g]=z.useState(""),[j,f]=z.useState(""),[_,B]=z.useState(""),[C,P]=z.useState(""),[T,u]=z.useState(d),[w,A]=z.useState(!1),{user:N}=Pt(),{mutate:G}=sn(),k=Nt({initialValues:{relatedItem:[],relatedPackage:[],createdBy:"",tsType:"Combine",balance:0,change:0,totalAmount:d,totalPaidAmount:0,createdAt:new Date,paymentType:"Cash",isDouble:!1,secondAmount:0,remark:""},validate:It(rn)});z.useEffect(()=>{A(!1)},[s]),z.useEffect(()=>{k.setFieldValue("totalAmount",d),w||u(d)},[d,k,w]),z.useEffect(()=>{k.setFieldValue("balance",T-(k.values.totalPaidAmount+k.values.secondAmount))},[T,k]),z.useEffect(()=>{S(T)},[T,S]);const V=p=>{if(p.paymentType==="Cash"&&!y){xe.error("Please add cash account");return}if(p.paymentType==="Bank"&&!_){xe.error("Please add bank account");return}if(x==="separate"&&l==="Cash"&&!j){xe.error("Please add second cash account");return}if(x==="separate"&&l==="Bank"&&!C){xe.error("Please add second bank account");return}const Y=(()=>{if(p.paymentType==="Bank")return{relatedBank:_};if(p.paymentType==="Cash")return{relatedCash:y}})(),Z=(()=>{if(j&&l==="Cash")return{secondAccount:j,secondPaymentType:"Cash"};if(C&&l==="Bank")return{secondAccount:C,secondPaymentType:"Bank"}})(),H=s.filter(F=>F.type==="item").map(F=>({item_id:F._id,price:F.sellingPrice,quantity:F.qty,discount:F.qty*F.sellingPrice-F.totalPrice}))||[],te=s.filter(F=>F.type==="package").map(F=>({item_id:F._id,price:F.sellingPrice,quantity:F.qty,discount:F.qty*F.sellingPrice-F.totalPrice}))||[],X={...p,isDouble:x!=="full",...Y,...Z,totalDiscount:d-T,paymentMethod:D,relatedItem:H,relatedPackage:te,createdBy:N==null?void 0:N.id,totalAmount:T,totalPaidAmount:p.totalPaidAmount+p.secondAmount,createdAt:tt(p.createdAt).format("YYYY-MM-DD")+"T00:00:00.000Z"};console.log(X),G(X,{onSuccess:()=>{xe.success("Voucher created successfully!")},onError:F=>{xe.error("Failed to create voucher: "+F.message)}})};return e.jsxs(Se,{w:"550px",style:{border:"1px solid #d9d9d9",borderRadius:"7px"},p:"sm",children:[e.jsx(Oe,{children:"Customer Info"}),e.jsxs(me,{gap:15,children:[e.jsx(pe,{data:["New","Old"],label:"Customer Status",defaultValue:"New"}),e.jsx(We,{placeholder:"Enter customer name",label:"Name"}),e.jsx(We,{placeholder:"Enter customer email",label:"Email"}),e.jsx(We,{placeholder:"Enter customer phone",label:"Phone"}),e.jsx(be,{bg:U,children:"Create"}),e.jsx(qe,{}),e.jsx("form",{onSubmit:k.onSubmit(V),children:e.jsxs(me,{gap:15,children:[e.jsx(kt,{...k.getInputProps("createdAt"),label:"Date",leftSection:e.jsx(Et,{}),leftSectionPointerEvents:"none",placeholder:"Enter date"}),e.jsx(Oe,{children:"Payment Method"}),e.jsx(ce.Group,{value:x,onChange:p=>R(p),children:e.jsxs(Ie,{mt:"xs",justify:"center",children:[e.jsx(ce,{color:U,value:"full",label:"Full"}),e.jsx(ce,{color:U,value:"separate",label:"Separate"})]})}),e.jsx(pe,{...k.getInputProps("paymentType"),label:"Payment Type",allowDeselect:!1,data:["Cash","Bank"]}),k.values.paymentType==="Cash"?e.jsx(pe,{placeholder:"Enter cash account",label:"Cash Accounts",allowDeselect:!1,value:y,onChange:p=>g(p),data:i==null?void 0:i.filter(p=>p.name==="Cash in Hand").map(p=>({label:p.subHeader,value:p._id}))}):e.jsx(e.Fragment,{children:e.jsx(pe,{label:"Bank Accounts",placeholder:"Enter bank account",value:_,onChange:p=>B(p),allowDeselect:!1,data:i==null?void 0:i.filter(p=>p.relatedHeader.name==="Cash at Bank").map(p=>({label:p.name,value:p._id}))})}),x==="separate"&&e.jsxs(e.Fragment,{children:[e.jsx(pe,{label:"Second Payment Type",allowDeselect:!1,value:l,onChange:p=>c(p),data:["Cash","Bank"]}),l==="Cash"?e.jsx(pe,{placeholder:"Enter cash account",label:"Cash Accounts",allowDeselect:!1,value:j,onChange:p=>f(p),data:i==null?void 0:i.filter(p=>p.name==="Cash in Hand").map(p=>({label:p.subHeader,value:p._id}))}):e.jsx(e.Fragment,{children:e.jsx(pe,{placeholder:"Enter bank account",label:"Bank Accounts",value:C,onChange:p=>P(p),allowDeselect:!1,data:i==null?void 0:i.filter(p=>p.relatedHeader.name==="Cash at Bank").map(p=>({label:p.name,value:p._id}))})})]}),e.jsx(qe,{}),e.jsx(Oe,{children:"Balance Total"}),e.jsxs(me,{gap:5,children:[e.jsx(J,{...k.getInputProps("totalAmount"),label:"Total Amount",hideControls:!0,disabled:!0}),e.jsxs(Ie,{wrap:"nowrap",align:"end",children:[e.jsx(J,{value:d-T,w:"90%",label:"Discount",disabled:!0,hideControls:!0}),e.jsx(on,{discountMethod:D,setDiscountMethod:I,totalAmount:d,setSubTotal:u,setIsConfirm:A})]}),e.jsx(J,{value:T,label:"Sub Total",hideControls:!0,disabled:!0}),e.jsx(J,{...k.getInputProps("totalPaidAmount"),label:"Pay Amount"}),x==="separate"&&e.jsx(J,{...k.getInputProps("secondAmount"),label:"Second Pay Amount"}),e.jsx(J,{...k.getInputProps("balance"),label:"Balance",hideControls:!0,disabled:!0}),e.jsx(J,{...k.getInputProps("change"),label:"Change",hideControls:!0,disabled:!0}),e.jsx(cn,{totalAmount:d,saleItems:s})]})]})})]})]})},dn=()=>{const[s,d]=z.useState([]),i=s==null?void 0:s.reduce((D,I)=>D+I.totalPrice,0),S=Tt();return e.jsxs(me,{p:"sm",children:[e.jsx(he,{align:"center",justify:"space-between",children:e.jsxs(he,{align:"center",gap:15,children:[e.jsx(Ct,{style:{cursor:"pointer"},onClick:()=>S(-1)}),e.jsx(Oe,{children:"Sale List"})]})}),e.jsxs(he,{gap:15,children:[e.jsx(en,{saleItems:s,setSaleItems:d,totalAmount:i}),e.jsx(un,{saleItems:s,totalAmount:i})]})]})},On=()=>e.jsx(dn,{});export{On as default};
