import{w as I,p as R,a as k,j as e,B as f,b as z,r as g,c as M,D as $,u as E,G as i,T as x,t as j,F as y,o as q}from"./index-HH_UOIZx.js";import{C,I as G,R as K}from"./CommonTitle-CeQYZZhX.js";import{F as _}from"./FilterButton-D-icS8k3.js";import{D as O}from"./DataTable-DmZ13xqo.js";import{A as Q}from"./ActionButton-DmpfxdBo.js";import{P as H,D as L,a as A}from"./DateIcon-COKakmTY.js";import{c as J}from"./createReactComponent-BvNoKUJd.js";import{a as T}from"./IconTrash-dlyoLBAc.js";import{u as F}from"./useQuery-CfinWix-.js";import{a as V}from"./axiosInstance-f51KjAOb.js";import{S as U}from"./Stack-CJLiOtGk.js";import{L as W}from"./Button-BxVRjdO9.js";const[X,Y]=I("Card component was not found in tree");var b={root:"m_e615b15f",section:"m_599a2148"};const Z={},w=R((s,n)=>{const a=k("CardSection",Z,s),{classNames:o,className:t,style:r,styles:c,vars:d,withBorder:m,inheritPadding:p,mod:S,...v}=a,h=Y();return e.jsx(f,{ref:n,mod:[{"with-border":m,"inherit-padding":p},S],...h.getStyles("section",{className:t,style:r,styles:c,classNames:o}),...v})});w.classes=b;w.displayName="@mantine/core/CardSection";const ee={},te=M((s,{padding:n})=>({root:{"--card-padding":$(n)}})),u=R((s,n)=>{const a=k("Card",ee,s),{classNames:o,className:t,style:r,styles:c,unstyled:d,vars:m,children:p,padding:S,...v}=a,h=z({name:"Card",props:a,classes:b,className:t,style:r,classNames:o,styles:c,unstyled:d,vars:m,varsResolver:te}),P=g.Children.toArray(p),N=P.map((l,D)=>typeof l=="object"&&l&&"type"in l&&l.type===w?g.cloneElement(l,{"data-first-section":D===0||void 0,"data-last-section":D===P.length-1||void 0}):l);return e.jsx(X,{value:{getStyles:h},children:e.jsx(H,{ref:n,unstyled:d,...h("root"),...v,children:N})})});u.classes=b;u.displayName="@mantine/core/Card";u.Section=w;/**
 * @license @tabler/icons-react v3.9.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B=J("outline","brand-cashapp","IconBrandCashapp",[["path",{d:"M17.1 8.648a.568 .568 0 0 1 -.761 .011a5.682 5.682 0 0 0 -3.659 -1.34c-1.102 0 -2.205 .363 -2.205 1.374c0 1.023 1.182 1.364 2.546 1.875c2.386 .796 4.363 1.796 4.363 4.137c0 2.545 -1.977 4.295 -5.204 4.488l-.295 1.364a.557 .557 0 0 1 -.546 .443h-2.034l-.102 -.011a.568 .568 0 0 1 -.432 -.67l.318 -1.444a7.432 7.432 0 0 1 -3.273 -1.784v-.011a.545 .545 0 0 1 0 -.773l1.137 -1.102c.214 -.2 .547 -.2 .761 0a5.495 5.495 0 0 0 3.852 1.5c1.478 0 2.466 -.625 2.466 -1.614c0 -.989 -1 -1.25 -2.886 -1.954c-2 -.716 -3.898 -1.728 -3.898 -4.091c0 -2.75 2.284 -4.091 4.989 -4.216l.284 -1.398a.545 .545 0 0 1 .545 -.432h2.023l.114 .012a.544 .544 0 0 1 .42 .647l-.307 1.557a8.528 8.528 0 0 1 2.818 1.58l.023 .022c.216 .228 .216 .569 0 .773l-1.057 1.057z",key:"svg-0"}]]);const se=()=>{const s=E(),n=t=>{s("/dashboard/sale/sales",{state:t})},a=t=>{alert(t.no)};return[{name:"No",cell:t=>t.no,width:"70px"},{name:"Code",cell:t=>t.code,width:"140px"},{name:"Total Amount",cell:t=>t.totalAmount,width:"150px"},{name:"Total Paid Amount",cell:t=>t.totalPaidAmount,width:"180px"},{name:"Refund Amount",cell:t=>t.refundAmount,width:"180px"},{name:"Second Paid Amount",cell:t=>t.secondAmount||0,width:"200px"},{name:"Repay Amount",cell:()=>"Repay",width:"150px"},{name:"Balance",cell:t=>t.balance||0,width:"100px"},{name:"Payment Type",cell:t=>t.paymentType,width:"170px"},{name:"Second Payment Type",cell:t=>t.secondPaymentType||"none",width:"220px"},{name:"Is Double",cell:t=>t.isDouble?"true":"false",width:"150px"},{name:"Actions",cell:t=>e.jsx(Q,{row:t,onDelete:()=>a(t),onEdit:()=>n(t)})}]},ne=({voucherCalculation:s})=>e.jsxs(e.Fragment,{children:[e.jsx(C,{children:"Bank List"}),e.jsx(i,{gap:20,children:s==null?void 0:s.bankList.map((n,a)=>e.jsxs(u,{withBorder:!0,padding:"sm",w:250,children:[e.jsxs(i,{align:"center",justify:"space-between",children:[e.jsx(x,{fw:550,children:n.name}),e.jsx(B,{})]}),e.jsxs(i,{gap:0,mt:5,children:[e.jsx(T,{size:16}),e.jsxs(x,{fw:600,fz:22,children:[n.amount," MMK"]})]})]},a))}),e.jsx(C,{children:"Cash List"}),e.jsx(i,{grow:!0,align:"center",gap:20,children:s==null?void 0:s.cashList.map((n,a)=>e.jsxs(u,{withBorder:!0,padding:"sm",w:250,children:[e.jsxs(i,{align:"center",justify:"space-between",children:[e.jsx(x,{children:n.name}),e.jsx(B,{})]}),e.jsxs(i,{gap:0,mt:5,children:[e.jsx(T,{size:18}),e.jsxs(x,{fw:600,fz:22,children:[n.amount," MMK"]})]})]},a))})]}),ae=async(s,n)=>(await V.get(`/v1/item-voucher?startDate=${s}&endDate=${n}`)).data.data,oe=(s="",n="")=>F({queryKey:["vouchers",s,n],queryFn:()=>ae(s,n),select:a=>a.map((o,t)=>({...o,no:t+1}))}),re=async(s,n)=>(await V.get(`/v1/voucher-calculation?startDate=${s}&endDate=${n}`)).data.data,ce=(s="",n="")=>F({queryKey:["vouchers-calculation",s,n],queryFn:()=>re(s,n),select:a=>{const o=Object.entries(a.bank).map(([r,c])=>({name:r,amount:c})),t=Object.entries(a.cash).map(([r,c])=>({name:r,amount:c}));return{bankList:o,cashList:t,bankTotal:a.bankTotal,cashTotal:a.cashTotal,total:a.total}}}),le=()=>{const[s,n]=g.useState(null),[a,o]=g.useState(null),{data:t,isLoading:r}=oe(j(s)||"",j(a)||""),{data:c}=ce(j(s)||"",j(a)||""),d=se(),m=E(),p=()=>{n(null),o(null)};return e.jsxs(U,{p:"sm",children:[e.jsx(y,{align:"center",justify:"space-between",children:e.jsxs(y,{align:"center",gap:15,children:[e.jsx(G,{style:{cursor:"pointer"},onClick:()=>m(-1)}),e.jsx(C,{children:"Voucher List"})]})}),e.jsx(f,{style:{border:"1px solid #d9d9d9",borderRadius:"7px"},p:"sm",children:e.jsxs(y,{justify:"end",align:"center",gap:15,children:[e.jsx(K,{onClick:p}),e.jsx(L,{w:150,leftSection:e.jsx(A,{}),leftSectionPointerEvents:"none",placeholder:"Start date",value:s,onChange:n}),e.jsx(L,{w:150,leftSection:e.jsx(A,{}),leftSectionPointerEvents:"none",placeholder:"End date",value:a,onChange:o}),e.jsx(_,{})]})}),e.jsx(ne,{voucherCalculation:c}),e.jsx(f,{children:r?e.jsx(y,{justify:"center",mt:30,children:e.jsx(W,{color:q})}):e.jsx(f,{children:e.jsx(O,{columns:d,data:t||[]})})})]})},ve=()=>e.jsx(le,{});export{ve as default};
